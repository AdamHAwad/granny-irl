(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{7711:function(e,s,r){Promise.resolve().then(r.bind(r,2067))},2067:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return x}});var n=r(7437),t=r(2265),a=r(6463),l=r(857),i=r(4208),c=r(4660);function d(e){let{params:s}=e,{user:r}=(0,l.a)(),c=(0,a.useRouter)(),[d,x]=(0,t.useState)(null),[m,u]=(0,t.useState)(!0),[g,b]=(0,t.useState)("");if((0,t.useEffect)(()=>{(async()=>{try{let e=await (0,i.getGameResult)(s.roomCode);if(!e){b("Game results not found");return}x(e)}catch(e){console.error("Error fetching game results:",e),b("Failed to load game results")}finally{u(!1)}})()},[s.roomCode]),m)return(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"glass-card p-8 text-center animate-slide-up",children:[(0,n.jsx)("div",{className:"text-xl text-granny-text mb-4 flex items-center justify-center gap-2",children:"\uD83C\uDFC6 Loading results..."}),(0,n.jsx)("div",{className:"w-8 h-8 border-2 border-granny-warning border-t-transparent rounded-full animate-spin mx-auto"})]})});if(g||!d)return(0,n.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-granny-bg/80 to-granny-bg pointer-events-none"}),(0,n.jsxs)("div",{className:"glass-card p-8 text-center animate-slide-up relative z-10",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-granny-text mb-4",children:"Results Error"}),(0,n.jsx)("p",{className:"text-granny-error mb-6",children:g||"Results not found"}),(0,n.jsx)("button",{onClick:()=>c.push("/"),className:"btn-primary px-6 py-3",children:"\uD83C\uDFE0 Back to Home"})]})]});let h=Object.values(d.final_players),f=h.filter(e=>"killers"===d.winners?"killer"===e.role:"survivor"===e.role&&e.isAlive),p=h.filter(e=>"killers"===d.winners?"survivor"===e.role||!e.isAlive:"killer"===e.role),y=d.game_ended_at-d.game_started_at;return(0,n.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 max-w-3xl mx-auto relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-granny-bg/80 to-granny-bg pointer-events-none"}),(0,n.jsxs)("div",{className:"w-full glass-modal p-8 text-granny-text animate-slide-up relative z-10",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-granny-text mb-4 flex items-center justify-center gap-3",children:"\uD83C\uDFC6 Game Results"}),(0,n.jsx)("div",{className:"text-8xl font-bold mb-6 animate-glow ".concat("killers"===d.winners?"text-granny-danger":"text-granny-survivor"),children:"killers"===d.winners?"\uD83D\uDC80 KILLERS WIN!":"\uD83D\uDEE1️ SURVIVORS WIN!"}),(0,n.jsx)("div",{className:"glass-card p-4 border border-granny-border/30 inline-block",children:(0,n.jsxs)("p",{className:"text-granny-text-muted flex items-center gap-2",children:["⏱️ Game Duration: ",(0,n.jsxs)("span",{className:"text-granny-text font-semibold",children:[Math.floor(y/6e4),"m ",Math.floor(y%6e4/1e3),"s"]})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-2xl font-semibold mb-4 text-granny-success flex items-center gap-2",children:["\uD83C\uDFC6 Winners (",f.length,")"]}),(0,n.jsx)("div",{className:"space-y-3",children:f.map(e=>(0,n.jsx)(o,{player:e,isWinner:!0},e.uid))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-2xl font-semibold mb-4 text-granny-error flex items-center gap-2",children:["\uD83D\uDC80 Eliminated (",p.length,")"]}),(0,n.jsx)("div",{className:"space-y-3",children:d.elimination_order.map((e,s)=>{let r=d.final_players[e];return r?(0,n.jsx)("div",{className:"glass-card border border-granny-error/30 bg-granny-error/5",children:(0,n.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-granny-error/20 border border-granny-error/50 rounded-full flex items-center justify-center",children:(0,n.jsxs)("span",{className:"text-granny-error font-bold text-sm",children:["#",s+1]})}),(0,n.jsx)(o,{player:r,isWinner:!1,showElimination:!0})]})},e):null})})]})]}),(0,n.jsx)("div",{className:"flex justify-center pt-6 border-t border-granny-border/30",children:(0,n.jsx)("button",{onClick:()=>c.push("/"),className:"btn-primary px-8 py-4 text-lg",children:"\uD83C\uDFE0 Return to Home"})})]})]})}function o(e){var s,r;let{player:t,isWinner:a,showElimination:l=!1}=e;return(0,n.jsx)("div",{className:"glass-card p-4 border transition-all duration-200 ".concat(a?"border-granny-success/50 bg-granny-success/10 hover:border-granny-success/70":l?"bg-transparent border-none p-0":"border-granny-border/30 hover:border-granny-border/50"),children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[t.profilePictureUrl?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("img",{src:t.profilePictureUrl,alt:t.displayName,className:"w-12 h-12 rounded-full object-cover border-2 ".concat(a?"border-granny-success/70":"killer"===t.role?"border-granny-danger/50":"border-granny-survivor/50")}),a&&(0,n.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-granny-success rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-xs",children:"\uD83C\uDFC6"})})]}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-full border-2 flex items-center justify-center ".concat(a?"bg-granny-success/20 border-granny-success/70":"killer"===t.role?"bg-granny-danger/20 border-granny-danger/50":"bg-granny-survivor/20 border-granny-survivor/50"),children:(0,n.jsx)("span",{className:"text-sm font-bold text-granny-text",children:null===(s=t.displayName[0])||void 0===s?void 0:s.toUpperCase()})}),a&&(0,n.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-granny-success rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-xs",children:"\uD83C\uDFC6"})})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"font-semibold text-granny-text",children:t.displayName}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat("killer"===t.role?"bg-granny-danger/20 text-granny-danger":"bg-granny-survivor/20 text-granny-survivor"),children:["killer"===t.role?"\uD83D\uDD2A":"\uD83D\uDEE1️"," ",null===(r=t.role)||void 0===r?void 0:r.toUpperCase()]}),a&&(0,n.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-granny-success/20 text-granny-success",children:"\uD83C\uDFC6 WINNER"})]}),l&&t.eliminatedAt&&(0,n.jsxs)("p",{className:"text-xs text-granny-text-muted mt-1 flex items-center gap-1",children:["⏰ Eliminated at ",new Date(t.eliminatedAt).toLocaleTimeString()]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[a&&(0,n.jsx)("div",{className:"text-3xl animate-bounce",children:"\uD83C\uDFC6"}),!a&&!t.isAlive&&(0,n.jsx)("div",{className:"text-2xl text-granny-error",children:"\uD83D\uDC80"})]})]})})}function x(e){let{params:s}=e;return(0,n.jsx)(c.Z,{fallback:(0,n.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-granny-bg/80 to-granny-bg pointer-events-none"}),(0,n.jsxs)("div",{className:"glass-card p-8 text-center animate-slide-up relative z-10",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD12"}),(0,n.jsx)("p",{className:"text-granny-text text-lg mb-4",children:"Please sign in to view results"}),(0,n.jsx)("p",{className:"text-granny-text-muted text-sm",children:"See how the hunt concluded"})]})]}),children:(0,n.jsx)(d,{params:s})})}}},function(e){e.O(0,[34,712,971,23,744],function(){return e(e.s=7711)}),_N_E=e.O()}]);