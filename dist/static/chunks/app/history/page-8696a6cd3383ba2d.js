(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{7376:function(e,r,t){Promise.resolve().then(t.bind(t,754))},754:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(7437),s=t(2265),a=t(6463),l=t(857),i=t(4208),d=t(4660);function o(){let{user:e}=(0,l.a)(),r=(0,a.useRouter)(),[t,d]=(0,s.useState)([]),[o,c]=(0,s.useState)(null),[x,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{e&&(async()=>{try{console.log("GameHistoryPage: Fetching data for user:",e.id);let[r,t]=await Promise.all([(0,i.getPlayerGameHistory)(e.id),(0,i.getPlayerGameStats)(e.id)]);d(r),c(t)}catch(e){console.error("Error fetching game history:",e)}finally{m(!1)}})()},[e]);let u=e=>new Date(e).toLocaleDateString(),g=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return x?(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"glass-card p-8 text-center animate-slide-up",children:[(0,n.jsx)("div",{className:"text-xl text-granny-text mb-4 flex items-center justify-center gap-2",children:"\uD83D\uDCCA Loading game history..."}),(0,n.jsx)("div",{className:"w-8 h-8 border-2 border-granny-danger border-t-transparent rounded-full animate-spin mx-auto"})]})}):(0,n.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-start p-4 max-w-6xl mx-auto relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-granny-bg/80 to-granny-bg pointer-events-none"}),(0,n.jsxs)("div",{className:"w-full glass-modal p-8 text-granny-text mb-6 animate-slide-up relative z-10",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-granny-text mb-2 flex items-center gap-3",children:"\uD83D\uDCCA Game History"}),(0,n.jsx)("p",{className:"text-granny-text-muted",children:"Your survival statistics and recent games"})]}),(0,n.jsx)("button",{onClick:()=>r.push("/"),className:"btn-ghost px-6 py-3 flex items-center gap-2",children:"\uD83C\uDFE0 Back to Home"})]}),o&&(0,n.jsxs)("div",{className:"mb-10",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6 text-granny-text flex items-center gap-2",children:"\uD83D\uDCC8 Your Stats"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-border/30 hover:border-granny-border/50 transition-all duration-200",children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-granny-text mb-2",children:o.gamesPlayed}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"\uD83C\uDFAE Games Played"})]}),(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-success/30 hover:border-granny-success/50 transition-all duration-200",children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-granny-success mb-2",children:o.wins}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"\uD83C\uDFC6 Wins"})]}),(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-error/30 hover:border-granny-error/50 transition-all duration-200",children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-granny-error mb-2",children:o.losses}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"\uD83D\uDC80 Losses"})]}),(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-warning/30 hover:border-granny-warning/50 transition-all duration-200",children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-granny-warning mb-2",children:o.avgPlacement}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"\uD83D\uDCCD Avg Placement"})]}),(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-danger/30 hover:border-granny-danger/50 transition-all duration-200",children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-granny-danger mb-2",children:o.killerWins}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"\uD83D\uDD2A Killer Wins"})]}),(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-survivor/30 hover:border-granny-survivor/50 transition-all duration-200",children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-granny-survivor mb-2",children:o.survivorWins}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"\uD83D\uDEE1️ Survivor Wins"})]}),(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-border/30 hover:border-granny-border/50 transition-all duration-200",children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-granny-text-muted mb-2",children:o.totalEliminations}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"⚰️ Times Eliminated"})]}),(0,n.jsxs)("div",{className:"glass-card p-6 text-center border border-granny-warning/30 hover:border-granny-warning/50 transition-all duration-200",children:[(0,n.jsxs)("div",{className:"text-3xl font-bold text-granny-warning mb-2",children:[o.gamesPlayed>0?Math.round(o.wins/o.gamesPlayed*100):0,"%"]}),(0,n.jsx)("div",{className:"text-sm text-granny-text-muted font-medium",children:"\uD83D\uDCCA Win Rate"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-granny-text flex items-center gap-2",children:["\uD83D\uDD52 Recent Games (",t.length,")"]}),0===t.length?(0,n.jsxs)("div",{className:"glass-card p-12 text-center border border-granny-border/30",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAE"}),(0,n.jsx)("p",{className:"text-granny-text-muted mb-6 text-lg",children:"No games played yet!"}),(0,n.jsx)("p",{className:"text-granny-text-muted mb-6 text-sm",children:"Start your survival journey and face the horrors that await"}),(0,n.jsx)("button",{onClick:()=>r.push("/"),className:"btn-primary px-8 py-4 text-lg",children:"\uD83C\uDFAF Play Your First Game"})]}):(0,n.jsx)("div",{className:"space-y-4",children:t.map((e,r)=>(0,n.jsxs)("div",{className:"glass-card p-6 border-2 transition-all duration-200 hover:scale-[1.01] ".concat(e.playerWon?"border-granny-success/30 hover:border-granny-success/50 hover:shadow-lg hover:shadow-granny-success/10":"border-granny-error/30 hover:border-granny-error/50 hover:shadow-lg hover:shadow-granny-error/10"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"px-4 py-2 rounded-xl text-sm font-bold ".concat(e.playerWon?"bg-granny-success/20 text-granny-success border border-granny-success/30":"bg-granny-error/20 text-granny-error border border-granny-error/30"),children:e.playerWon?"\uD83C\uDFC6 WON":"\uD83D\uDC80 LOST"}),(0,n.jsx)("div",{className:"px-4 py-2 rounded-xl text-sm font-bold ".concat("killer"===e.playerRole?"bg-granny-danger/20 text-granny-danger border border-granny-danger/30":"bg-granny-survivor/20 text-granny-survivor border border-granny-survivor/30"),children:"killer"===e.playerRole?"\uD83D\uDD2A KILLER":"\uD83D\uDEE1️ SURVIVOR"}),(0,n.jsxs)("div",{className:"text-sm text-granny-text-muted font-mono",children:["Room: ",(0,n.jsx)("span",{className:"text-granny-text font-semibold",children:e.room_id})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("div",{className:"text-sm font-semibold text-granny-text",children:[u(e.game_ended_at)," at ",g(e.game_ended_at)]}),(0,n.jsxs)("div",{className:"text-xs text-granny-text-muted mt-1",children:["⏱️ ",e.gameDurationMinutes," min • \uD83D\uDCCD Placement: #",e.placement]})]})]}),(0,n.jsxs)("div",{className:"mt-4 text-sm text-granny-text-muted border-t border-granny-border/20 pt-3",children:[(0,n.jsx)("span",{className:"font-semibold ".concat("killers"===e.winners?"text-granny-danger":"text-granny-survivor"),children:"killers"===e.winners?"\uD83D\uDD2A Killers won":"\uD83D\uDEE1️ Survivors won"}),e.playerWon?" - You emerged victorious as a ".concat(e.playerRole,"!"):" - You fell victim as a ".concat(e.playerRole)]})]},"".concat(e.room_id,"-").concat(e.game_ended_at)))})]})]})]})}function c(){return(0,n.jsx)(d.Z,{fallback:(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"glass-card p-8 text-center animate-slide-up",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD12"}),(0,n.jsx)("p",{className:"text-granny-text text-lg mb-4",children:"Please sign in to view your game history"}),(0,n.jsx)("p",{className:"text-granny-text-muted text-sm",children:"Track your survival statistics and achievements"})]})}),children:(0,n.jsx)(o,{})})}}},function(e){e.O(0,[34,712,971,23,744],function(){return e(e.s=7376)}),_N_E=e.O()}]);